;(function($,_,undefined){"use strict";ips.controller.mixin('plugins.dashboardTabs','core.front.profile.main',true,function(){this.before('initialize',function(){this.on('click','[data-action="dashboard"]',this.changeType);});this.after('initialize',function(){if($('#inline-message-overlay').length){$(document).ready(function(){showOverlay($('#inline-message-overlay'));});}});this.around('stateChange',function(originalFn){var state=History.getState();Debug.log(state.data.section);if(state.data.section!='repLog'){$('#elProfileMainTabs .ipsTabs_activeItem').removeClass('ipsTabs_activeItem');$('[data-action="'+state.data.section+'"]').addClass('ipsTabs_activeItem');}
switch(state.data.section){case'goToProfile':this._changeContent(false,state.url);$('#elProfileStats').removeClass('cProfileHeaderContent');break;case'browseContent':case'dashboard':case'repLog':this._changeContent(false,state.url);if(ips.utils.responsive.enabled()&&ips.utils.responsive.currentIs('phone')){$('#elProfileStats').addClass('cProfileHeaderContent');}
break;}});});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.mixin('plugins.codepenEmbeds','core.front.core.autoSizeIframe',true,function(){this.around('height',function(originalFn,data){this.scope.css({height:'100% !important'});});});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('plugins.codepenCheck',{initialize:function(){this.on('click','button[type="submit"]:not([data-action])',this.checkCodepen);},checkCodepen:function(e){var element=e.target;e.preventDefault();var codepenField=$('input[name="codepen_url"]:first');if(codepenField.length&&codepenField.val().length){$(element).parents('form:first').submit();return;}
var editorArea=$('.cke_editable[contenteditable="true"]:first');var exp=new RegExp('http(s?):\/\/(www\.)?codepen\.io(.+?)("|\'|<|>|\s|$)','im');if(exp.test($(editorArea).html())==false){ips.ui.alert.show({type:'confirm',message:ips.getString('codepen_popup_message'),showIcon:false,buttons:{ok:ips.getString('codepen_popup_submit'),cancel:ips.getString('codepen_popup_add')},callbacks:{ok:function(e){$(element).parents('form:first').submit();}}});}
else{$(element).parents('form:first').submit();}}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('plugins.emailTriggerTemplates',{initialize:function(){this.on('change','#elSelect_emailtemplate_invoice',this.toggleTemplates);},toggleTemplates:function(){var invoiceId=$('#elSelect_emailtemplate_invoice').val();var renewals=$('[name="emailtemplate_renewals"]').val().split(',');if(renewals.indexOf(invoiceId)==-1){$('option[value="invoiceWarning"]').prop('disabled',true);}
else{$('option[value="invoiceWarning"]').prop('disabled',false);}}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('plugins.googleTracking',{_items:[],initialize:function(){this.on('wizardStepChanged',this.checkTracking);this.on('click','[data-action="newMember"]',this.checkTracking);this.checkTracking();},checkTracking:function(){if($('body').attr('data-pageapp')!='nexus'||$('body').attr('data-pagecontroller')!='checkout'){return true;}
if(ips.getSetting('baseURL')=='//localhost/gs/'){return true;}
var memberChoice=$('div[data-role="memberChoice"]');var newCustomerForm=$('div[data-role="newCustomerForm"]');if(memberChoice.length&&newCustomerForm.length){if(!($(newCustomerForm).is(':visible'))){ga('require','ec');ga('ec:setAction','checkout',{'step':'YourInfo-SignedOut'});ga('send','pageview',{'page':'/club/checkout-YourInfo-SignedOut','title':'Checkout Account Info - Signed Out'});}
else{ga('require','ec');ga('ec:setAction','checkout',{'step':'YourInfo-NewMember'});ga('send','pageview',{'page':'/checkout-YourInfo-NewMember','title':'Checkout Account Info - New Member'});}}
else if($('#elInput_cm_last_name').length){ga('require','ec');ga('ec:setAction','checkout',{'step':'ConfirmPay-EditBilling'});ga('send','pageview',{'page':'/checkout-ConfirmPay-EditBilling','title':'Checkout Billing Info'});}
else if($('#elInput_coupon_code').length){this.step2();}},step2:function(){var self=this;ips.getAjax()(ips.getSetting('baseURL')+'?app=nexus&module=checkout&controller=checkout&do=googleTrackingItems&id='+ips.getSetting('googleInvoiceId'),{type:'POST',dataType:'json'}).done(function(response){ga('require','ec');ga('require','ecommerce');$.each(response,function(index,item){if(self._items.indexOf(item['id'])===-1){ga('ecommerce:addItem',{'id':ips.getSetting('googleTrackingId'),'name':item['name'],'price':item['price'],'quantity':item['quantity']});ga('ec:addProduct',{'id':item['id'].toString(),'name':item['name'],'price':item['price'],'quantity':item['quantity']});self._items.push(item['id']);}});ga('ec:setAction','checkout',{'step':'ConfirmPay'});ga('ecommerce:send');ga('send','pageview',{'page':'/checkout-ConfirmPay','title':'Confirm and Pay'});});}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.mixin('plugins.blockAutopoll','core.front.core.instantNotifications',true,function(){this.around('_doAjaxRequest',function(originalFn,dataToSend){if(ips.getSetting('desktopNotifications')==2){return;}
originalFn(dataToSend);})});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.mixin('plugins.disableNotifications','core.front.system.notificationSettings',true,function(){this.around('_showNotificationChoice',function(originalFn){var type=ips.utils.notification.permissionLevel();if(type!='granted'){originalFn();return;}
var autoPoll=0;var text=ips.getString('disable_notifications');if(ips.getSetting('desktopNotifications')==2){autoPoll=1;text=ips.getString('enable_notifications');this.scope.find('[data-role="browserNotifyInfo"]').show().html(ips.templates.render('notification.denied'));}
else{this.scope.find('[data-role="browserNotifyInfo"]').show().html(ips.templates.render('notification.granted'));}
var url=ips.getSetting('baseURL')+'?app=core&module=system&controller=notifications&do=autopoll&autopoll='+autoPoll;var button="<a href='"+url+"' class='ipsButton ipsButton_veryLight ipsButton_fullWidth'>"+text+"</a>";$(button).appendTo('.cNotificationBox');});});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('plugins.gsPageFilters',{initialize:function(){this.on('click','[data-action="gsTagFilter"]',this.updateTableFromTags);this.on('input','#elInput_gs_search',this.updateTableFromSearch);this.on('change','select#gsTagDropdown',this.updateTableFromTagDropdown);},updateTableFromTags:function(e){e.preventDefault();var element=e.target;if($(element).data('action')!='gsTagFilter'){element=$(element).parents('[data-action="gsTagFilter"]');}
this.updateTable({tags:$(element).data('tag')});},updateTableFromTagDropdown:function(e){this.updateTable({tags:$('select#gsTagDropdown').val()});},updateTableFromSearch:function(e){var element=e.target;if($(element).val().length<3){if($(element).val().length==0){this.updateTable({searchTerm:""});}}
else{this.updateTable({searchTerm:$(element).val()});}},updateTable:function(params){var table=$('div[data-resort]');if(!_.isUndefined(table)&&table.length){var sortById=$(table).find('[data-role="sortButton"]').attr('id');var sortBy=$('#'+sortById+'_menu li.ipsMenu_itemChecked').data('ipsmenuvalue');var sortDirection=$('#'+sortById+'_menu li.ipsMenu_itemChecked').data('sortdirection');ips.getAjax()($(table).attr('data-baseurl')+'&'+$(table).attr('data-resort')+'=1&sortby='+sortBy+'&sortdirection='+sortDirection,{method:'post',dataType:'json',data:params}).done(function(response){$(table).find('[data-role="tableRows"]').html(response['rows']);$(table).find('[data-role="tablePagination"]').html(response['pagination']);if($('[data-role="featuredTitle"]').length){if(!_.isUndefined(params['tags'])&&params['tags'].length){$('[data-role="featuredTitle"]').html(params['tags']+' FAQs');}
else if(!_.isUndefined(params['searchTerm'])&&params['searchTerm'].length){$('[data-role="featuredTitle"]').html('Search results for "'+params['searchTerm']+'"');}
else{$('[data-role="featuredTitle"]').html('All FAQs');}}
$(document).trigger('contentChange',[$(table)]);var event=new Event('filterApplied');document.dispatchEvent(event);});}
else{ips.getAjax()(ips.getSetting('baseURL')+'?app=cms&module=pages&controller=page&page_id='+$('#elCmsPageWrap').data('pageid'),{method:'post',dataType:'json',data:params}).done(function(response){$('[data-role="featuredRows"]').html(response['rows']);$('ul.ipsPagination').replaceWith(response['pagination']);if($('[data-role="featuredTitle"]').length){if(!_.isUndefined(params['tags'])&&params['tags'].length){$('[data-role="featuredTitle"]').html(params['tags']+' FAQs');}
else if(!_.isUndefined(params['searchTerm'])&&params['searchTerm'].length){$('[data-role="featuredTitle"]').html('Search results for "'+params['searchTerm']+'"');}
else{$('[data-role="featuredTitle"]').html('All FAQs');}}
$(document).trigger('contentChange',[$('#elCmsPageWrap')]);var event=new Event('filterApplied');document.dispatchEvent(event);});}}});}(jQuery,_));;